<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace：必须与对应的接口全类名一致 id:必须与对应接口的某个对应的方法名一致 -->
<mapper namespace="www.tianfengSD.com.dao.IUserDao">
	<select id="getUserList" resultType="UserVo">
		select u.id,
		u.`name` as
		name,
		u.`password` as password,
		u.wx_openid as wx_openid,
		u.qq_openid as
		qq_openid,
		u.phone as phone,
		u.login_type as login_type,
		u.account_type
		as account_type,
		u.headurl as headurl,
		u.integral as integral,
		u.nickname as nickname,
		u.createtime as createDate,
		u.updatetime as
		lastuUdateDate,
		u.remark as remark FROM user_info_t u
	</select>
	<insert id="registerUser" parameterType="UserVo">
		INSERT INTO user_info_t
		(
		NAME,
		PASSWORD,
		phone,
		createtime,
		updatetime
		)
		VALUE
		(#{name},#{password},#{phone},NOW(),NOW())
	</insert>
	<update id="updateUserByUid" parameterType="UserVo">
		update user_info_t u set u.id=#{id}
		<if test="name != null and name != ''">
			,u.name=#{name}
		</if>
		<if test="nickname != null and nickname != ''">
			,u.headurl=#{nickname}
		</if>
		<if test="headurl != null and headurl != ''">
			,u.headurl=#{headurl}
		</if>
		where u.id=#{id}
	</update>
	<select id="validateUser" parameterType="UserVo" resultType="int">
		SELECT
		COUNT(1) AS num
		FROM
		user_info_t u
		WHERE
		u.phone =#{phone}
		AND
		u.`password` =#{password}
	</select>
	<select id="getUserByUId" parameterType="UserVo" resultType="UserVo">
		select u.id,
		u.`name` as
		name,
		u.`password` as password,
		u.wx_openid as wx_openid,
		u.qq_openid as
		qq_openid,
		u.phone as phone,
		u.login_type as login_type,
		u.account_type
		as account_type,
		u.headurl as headurl,
		u.integral as integral,
		u.nickname as nickname,
		u.createtime as createDate,
		u.updatetime as
		lastuUdateDate,
		u.remark as remark FROM user_info_t u
		where u.id=#{id}
	</select>
</mapper>  